<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Goliath II: Structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Goliath II
   </div>
   <div id="projectbrief">Core</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Structure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Concepts</h2>
<p>The <code>core</code> is divided into a <code>controller</code> and many <code>modules</code>. </p><h3>Modules</h3>
<p>The modules represent wrappers around physical objects and/or libraries. Often they are an abstraction of an otherwise tedious or complicated task. For example, the <code>vision</code> library makes it easy to detect lines within an image without first processing canny image's or connecting parts. </p><h3>Controller</h3>
<p>The controller consists of three parts, <code>handles</code>, <code>commands</code> and <code>repositories</code>.</p>
<p><b>Handles</b></p>
<p>Handles are a way for the controller to define whether a physical or digital resource is available or not. Every module can define it's own handles. These handles can also have other data associated with them, like id's or configuration. Handles are like mutexes in that they can be locked and unlocked to represent the state of a resource. Handles are stored in a <code>HandleMap</code> with an associated ID.</p>
<p><b>Commands</b></p>
<p>The commands represent the actual logic of the core. They contain a list of instructions for a specific task. Commands are stored within a <code>CommandMap</code>. Before adding a command to said map, the creator must assign all handles the current command <em>can</em> occupy. All these handles will be locked when the command is called. And can be unlocked dynamically.</p>
<p><b>Repositories</b></p>
<h2>Application Flow</h2>
<p>When a command enters the appliation via the <code>ZMQ Messaging Module</code> it will be looked up in the <code>HandleMap</code> and it's passed arguments extracted. All necessary handles will be locked and the command will be started on a new thread. Within this new thread the command can unlock all handles itself. Whilst running the command can dynamically check if a other command is trying to interrupt itself. If so, the command can handle the requried steps itself. Else the command will finish executing and unlock all occupied handles.</p>
<h2>Layout</h2>
<h3>Project Map</h3>
<pre class="fragment">|-- cmake
|   `-- modules
|-- doc
|-- src
|   |-- controller
|   |   |-- commands
|   |   `-- util
|   |-- modules
|   |   |-- foundation
|   |   |   |-- include
|   |   |   |   `-- goliath
|   |   |   `-- src
|   |   |-- gpio
|   |   |   `-- include
|   |   |       `-- goliath
|   |   |-- i2c
|   |   |   |-- handles
|   |   |   `-- include
|   |   |       `-- goliath
|   |   |-- motor-controller
|   |   |   |-- include
|   |   |   |   `-- goliath
|   |   |   `-- sketches
|   |   |-- openal
|   |   |   |-- include
|   |   |   |   `-- goliath
|   |   |   `-- util
|   |   |-- servo
|   |   |   `-- include
|   |   |       `-- goliath
|   |   |-- vision
|   |   |   |-- detectors
|   |   |   |-- include
|   |   |   |   `-- goliath
|   |   |   |-- processors
|   |   |   `-- util
|   |   `-- zmq-messaging
|   |       |-- include
|   |       |   `-- goliath
|   |       `-- src
|   `-- resources
|-- tests
`-- third_party
    |-- lib-dynamixel
    `-- proto
</pre> <h3>Explanation</h3>
<p><b>CMake Modules</b> </p><pre class="fragment">cmake
`-- modules
</pre><p> Contains utitility <code>.cmake</code> files used by different <code>CmakeLists.txt</code>'s</p>
<p><b>Documentation</b> </p><pre class="fragment">doc
</pre><p> Contains files for generating documentation, like this page. Also logic to automatically update documentation.</p>
<p><b>Source</b> </p><pre class="fragment">src
</pre><p> Contains all written source code.</p>
<p><b>Controller</b> </p><pre class="fragment">controller
|-- commands
`-- util
</pre><p> Contains the controller, explained above. Main entrypoint of the application. The <code>commands</code> subdirectory contains all commands and helpers. In the root are all <code>handles</code> and handle helpers stored.</p>
<p><b>Foundation Module</b> </p><pre class="fragment">`-- modules
    foundation
    |-- include
    |   `-- goliath
    `-- src
</pre><p> Contains defenitions all other module depends on, like defining a base class for a <code>handle</code>.</p>
<p><b>GPIO Module</b> </p><pre class="fragment">`-- modules
    gpio
    `-- include
        `-- goliath
</pre><p> Contains interfacing for the Raspberry Pi's GPIO pins.</p>
<p><b>I<sup>2</sup>C Module</b> </p><pre class="fragment">`-- modules
    i2c
    |-- handles
    `-- include
        `-- goliath
</pre><p> Contains communication with Arduino's using the I<sup>2</sup>C protocol. Used primarily by the motor controller module.</p>
<p><b>Motor Controller Module</b> </p><pre class="fragment">`-- modules
    motor-controller
    |-- include
    |   `-- goliath
    `-- sketches
</pre><p> Contains definitions for controlling the motor Arduino, as well as sketches stored on said Arduino.</p>
<p><b>OpenAL Module</b> </p><pre class="fragment">`-- modules
    openal
    |-- include
    |   `-- goliath
    `-- util
</pre><p> Contains audio utilities that may or may not be used with the dance exercises.</p>
<p><b>Servo Module</b> </p><pre class="fragment">`-- modules
    servo
    `-- include
       `-- goliath
</pre><p> Contains abstractinos for driving and controlling servo's.</p>
<p><b>Vision Module</b> </p><pre class="fragment">`-- modules
    vision
    |-- detectors
    |-- include
    |   `-- goliath
    |-- processors
    `-- util
</pre><p> Contains everything vision and camera related. <code>detectors</code> are objects that detect objects / shapes within images and <code>processors</code> alter an image in some way.</p>
<p><b>ZMQ Messaging Module</b> </p><pre class="fragment">`-- modules
    zmq-messaging
    |-- include
    |   `-- goliath
    `-- src
</pre><p> Connects the core with the outside world, using Google's protobufs. Dependency of the controller.</p>
<p><b>Resources</b> </p><pre class="fragment">resources
</pre><p> Any other type of file that is not a source, but is needed by the project is stored here.</p>
<p><b>Unit Tests</b> </p><pre class="fragment">tests
</pre><p> Contains unit tests to test a specific module on it's functionallity.</p>
<p><b>Third Party</b> </p><pre class="fragment">third_party
</pre><p> Contains any other code / libraries not defined in the <code>core</code> project.</p>
<p><b>Dynamixel</b> </p><pre class="fragment">`-- third_party
    `-- lib-dynamixel
</pre><p> Modified version of the <code>Dynamixel</code> library to cater to our needs.</p>
<p><b>Protobuf</b> </p><pre class="fragment">`-- third_party
    `-- protobuf
</pre><p> Contains all protobufs being used by our project(s), they are passed between the broker and the <code>core</code> with the ZMQ Messaging Module. Protobuf's are written in a custom language that is cross platform. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
