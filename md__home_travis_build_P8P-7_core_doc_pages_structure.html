<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Goliath II: Structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Goliath II
   </div>
   <div id="projectbrief">Core</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Structure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Concepts</h2>
<p>The <code>core</code> is divided into a <code>controller</code> and many <code>modules</code>. </p>
<h3>Modules</h3>
<p>The modules represent wrappers around physical objects and/or libraries. Often they are an abstraction of an otherwise tedious or complicated task. For example, the <code>vision</code> library makes it easy to detect lines within an image without first processing canny image's or connecting parts. </p>
<h3>Controller</h3>
<p>The controller consists of three parts, <code>handles</code>, <code>commands</code> and <code>repositories</code>.</p>
<p><b>Handles</b> Handles are a way for the controller to define whether a physical or digital resource is available or not. Every module can define it's own handles. These handles can also have other data associated with them, like id's or configuration. Handles are like mutexes in that they can be locked and unlocked to represent the state of a resource. Handles are stored in a <code>HandleMap</code> with an associated ID.</p>
<p><b>Commands</b> The commands represent the actual logic of the core. They contain a list of instructions for a specific task. Commands are stored within a <code>CommandMap</code>. Before adding a command to said map, the creator must assign all handles the current command <em>can</em> occupy. All these handles will be locked when the command is called. And can be unlocked dynamically.</p>
<p><b>Repositories</b></p>
<h2>Application Flow</h2>
<p>When a command enters the appliation via the <code>ZMQ Messaging Module</code> it will be looked up in the <code>HandleMap</code> and it's passed arguments extracted. All necessary handles will be locked and the command will be started on a new thread. Within this new thread the command can unlock all handles itself. Whilst running the command can dynamically check if a other command is trying to interrupt itself. If so, the command can handle the requried steps itself. Else the command will finish executing and unlock all occupied handles.</p>
<h2>Layout</h2>
<h3>Project Map</h3>
<p>``` |&ndash; cmake | `&ndash; modules |&ndash; doc |&ndash; src | |&ndash; controller | | |&ndash; commands | | `&ndash; util | |&ndash; modules | | |&ndash; foundation | | | |&ndash; include | | | | <code>-- goliath | | |</code>&ndash; src | | |&ndash; gpio | | | <code>-- include | | |</code>&ndash; goliath | | |&ndash; i2c | | | |&ndash; handles | | | <code>-- include | | |</code>&ndash; goliath | | |&ndash; motor-controller | | | |&ndash; include | | | | <code>-- goliath | | |</code>&ndash; sketches | | |&ndash; openal | | | |&ndash; include | | | | <code>-- goliath | | |</code>&ndash; util | | |&ndash; servo | | | <code>-- include | | |</code>&ndash; goliath | | |&ndash; vision | | | |&ndash; detectors | | | |&ndash; include | | | | `&ndash; goliath | | | |&ndash; processors | | | <code>-- util | |</code>&ndash; zmq-messaging | | |&ndash; include | | | <code>-- goliath | |</code>&ndash; src | `&ndash; resources |&ndash; tests `&ndash; third_party |&ndash; lib-dynamixel <code>-- proto </code>``</p>
<h3>Explanation</h3>
<p><b>CMake Modules</b> ``` cmake <code>-- modules </code>`<code> Contains utitility</code>.cmake<code>files used by different</code>CmakeLists.txt`'s</p>
<p><b>Documentation</b> ``` doc ``` Contains files for generating documentation, like this page. Also logic to automatically update documentation.</p>
<p><b>Source</b> ``` src ``` Contains all written source code.</p>
<p><b>Controller</b> ``` controller |&ndash; commands <code>-- util </code>`<code> Contains the controller, explained above. Main entrypoint of the application. The</code>commands<code>subdirectory contains all commands and helpers. In the root are all</code>handles` and handle helpers stored.</p>
<p><b>Foundation Module</b> ``<code> </code>&ndash; modules foundation |&ndash; include | <code>-- goliath </code>&ndash; src ``<code> Contains defenitions all other module depends on, like defining a base class for a</code>handle`.</p>
<p><b>GPIO Module</b> ``<code> </code>&ndash; modules gpio <code>-- include </code>&ndash; goliath ``` Contains interfacing for the Raspberry Pi's GPIO pins.</p>
<p><b>I<sup>2</sup>C Module</b> ``<code> </code>&ndash; modules i2c |&ndash; handles <code>-- include </code>&ndash; goliath ``` Contains communication with Arduino's using the I<sup>2</sup>C protocol. Used primarily by the motor controller module.</p>
<p><b>Motor Controller Module</b> ``<code> </code>&ndash; modules motor-controller |&ndash; include | <code>-- goliath </code>&ndash; sketches ``` Contains definitions for controlling the motor Arduino, as well as sketches stored on said Arduino.</p>
<p><b>OpenAL Module</b> ``<code> </code>&ndash; modules openal |&ndash; include | <code>-- goliath </code>&ndash; util ``` Contains audio utilities that may or may not be used with the dance exercises.</p>
<p><b>Servo Module</b> ``<code> </code>&ndash; modules servo <code>-- include </code>&ndash; goliath ``` Contains abstractinos for driving and controlling servo's.</p>
<p><b>Vision Module</b> ``<code> </code>&ndash; modules vision |&ndash; detectors |&ndash; include | `&ndash; goliath |&ndash; processors <code>-- util </code>`<code> Contains everything vision and camera related.</code>detectors<code>are objects that detect objects / shapes within images and</code>processors` alter an image in some way.</p>
<p><b>ZMQ Messaging Module</b> ``<code> </code>&ndash; modules zmq-messaging |&ndash; include | <code>-- goliath </code>&ndash; src ``` Connects the core with the outside world, using Google's protobufs. Dependency of the controller.</p>
<p><b>Resources</b> ``` resources ``` Any other type of file that is not a source, but is needed by the project is stored here.</p>
<p><b>Unit Tests</b> ``` tests ``` Contains unit tests to test a specific module on it's functionallity.</p>
<p><b>Third Party</b> ``` third_party ``<code> Contains any other code / libraries not defined in the</code>core` project.</p>
<p><b>Dynamixel</b> ``<code> </code>&ndash; third_party <code>-- lib-dynamixel </code>`<code> Modified version of the</code>Dynamixel` library to cater to our needs.</p>
<p><b>Protobuf</b> ``<code> </code>&ndash; third_party <code>-- protobuf </code>`<code> Contains all protobufs being used by our project(s), they are passed between the broker and the</code>core` with the ZMQ Messaging Module. Protobuf's are written in a custom language that is cross platform. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
